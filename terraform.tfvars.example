# Environment Configuration
environment  = "dev"
project_name = "homelab"

# Infrastructure Configuration
kubernetes_context = "docker-desktop"
domain_suffix      = "example.com"  # Change to your domain

# Cloudflare Configuration
cloudflare_account_id = ""  # Add your Cloudflare Account ID here
cloudflare_api_token  = ""  # Add your Cloudflare API Token here
cloudflare_team_name  = ""  # Add your Cloudflare Zero Trust team name (e.g., "rainforest")

# OAuth Configuration for Docker MCP Gateway
oauth_client_id     = ""  # Cloudflare Access SaaS Application Client ID
oauth_client_secret = ""  # Cloudflare Access SaaS Application Client Secret

# Feature Flags
enable_postgresql        = true   # Enable shared PostgreSQL database
enable_minio            = true   # Enable MinIO S3-compatible object storage
enable_persistence       = false  # Enable persistent volumes (optional)
enable_cloudflare_tunnel = true   # Enable Cloudflare Tunnel for external access
enable_docker_mcp_gateway = false # Enable Docker MCP Gateway for remote Docker operations

# Service Configuration
enable_calibre_web       = true   # Enable Calibre Web ebook server
enable_homepage          = true   # Enable Homepage dashboard
enable_openspeedtest     = false  # Enable OpenSpeedTest (can run on separate machine)

# Resource Sizing
default_cpu_limit    = "500m"
default_memory_limit = "1Gi"
default_storage_size = "10Gi"
minio_storage_size   = "100Gi"  # MinIO storage size (larger default for object storage)

# Zero Trust Access Control (requires enabling Access in Cloudflare dashboard)
# Option A: Domain-specific (recommended for security)
allowed_email_domains = ["yourdomain.com"]  # Only allow emails from your domain
allowed_emails        = []                  # Add specific emails if needed

# Option B: Public email providers (less secure)
# allowed_email_domains = ["gmail.com"]     # Allow any Gmail addresses
# allowed_emails        = ["user@domain.com"] # Specific email addresses

# Option C: Disable authentication (for testing only)
# allowed_email_domains = []  # No authentication
# allowed_emails        = []  # No authentication

# Service Tokens for OAuth Worker ↔ Docker MCP Gateway Authentication
#
# STEP 1: Create service token in Cloudflare Dashboard
#   Navigate to: https://dash.cloudflare.com/ → Zero Trust → Access → Service Auth → Service Tokens
#   Click "Create Service Token"
#   Name: "OAuth Worker - Docker MCP Internal"
#   Duration: Leave empty (never expires)
#
#   IMPORTANT: Copy BOTH values immediately (Client Secret cannot be viewed again!)
#   - Client ID: Looks like "2d0a0192257027201e709f8bb7144785.access"
#   - Client Secret: Looks like "7125b65e4cff771b41a95b45419b63f07cfc51bac9e2acd5e2df933c6607725a"
#
# STEP 2: Add credentials below
#   - service_token_ids: List with Client ID (for Zero Trust policy)
#   - oauth_worker_service_token_client_id: Client ID (for Worker secrets)
#   - oauth_worker_service_token_client_secret: Client Secret (for Worker secrets)
#
# STEP 3: Run terraform apply
#   Terraform will automatically:
#   - Create DNS record for docker-mcp-internal.rainforest.tools
#   - Update Zero Trust policy to allow service token
#   - Configure OAuth Worker secrets (SERVICE_TOKEN_ID, SERVICE_TOKEN_SECRET)

service_token_ids                        = []  # Add your Client ID here: ["abc123...def.access"]
oauth_worker_service_token_client_id     = ""  # Your Client ID (CF-Access-Client-Id)
oauth_worker_service_token_client_secret = ""  # Your Client Secret (CF-Access-Client-Secret)